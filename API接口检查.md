# API æ¥å£æ£€æŸ¥

æœ¬æ–‡æ¡£ä¸“æ³¨äºæ£€æŸ¥å‰ç«¯ API æ¥å£çš„å®ç°æƒ…å†µã€‚

> ğŸ’¡ é‡åˆ°é—®é¢˜ï¼ŸæŸ¥çœ‹ [é—®é¢˜æ’æŸ¥æŒ‡å—](./é—®é¢˜æ’æŸ¥æŒ‡å—.md)  
> ğŸ“– éœ€è¦è°ƒè¯•æ­¥éª¤ï¼ŸæŸ¥çœ‹ [è°ƒè¯•æ­¥éª¤](./è°ƒè¯•æ­¥éª¤.md)

## æ¥å£å®ç°æ£€æŸ¥

### âœ… 1. åˆ›å»ºå¸–å­æ¥å£ (POST /posts)

- **å®ç°ä½ç½®**: `src/api/posts.js` - `createPost()`
- **è°ƒç”¨ä½ç½®**: `src/views/CreatePost.vue` - `publish()`
- **è®¤è¯**: âœ… é€šè¿‡è¯·æ±‚æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ  `Authorization: Bearer ${token}` header
- **æ•°æ®æ ¼å¼**:

  ```javascript
  {
    userId, title, content, images, tags, visibility;
  }
  ```

- **çŠ¶æ€**: âœ… **æ¥å£å®ç°æ­£ç¡®ï¼Œå¯ä»¥ä¸åç«¯è”é€š**

### âœ… 2. è·å–å¸–å­åˆ—è¡¨æ¥å£ (GET /posts)

- **å®ç°ä½ç½®**: `src/api/posts.js` - `getPosts()`
- **è°ƒç”¨ä½ç½®**: `src/views/DiscoverPage.vue` - `loadExplore()`
- **è®¤è¯**: âœ… é€šè¿‡è¯·æ±‚æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ  `Authorization: Bearer ${token}` header
- **çŠ¶æ€**: âœ… **æ¥å£å®ç°æ­£ç¡®ï¼Œå¯ä»¥ä¸åç«¯è”é€š**

### âœ… 3. å‘å¸ƒè¯„è®ºæ¥å£ (POST /posts/{postId}/comments)

- **å®ç°ä½ç½®**: `src/api/posts.js` - `postComment()`
- **è°ƒç”¨ä½ç½®**: `src/views/PostDetail.vue` - `addComment()`
- **è®¤è¯**: âœ… é€šè¿‡è¯·æ±‚æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ  `Authorization: Bearer ${token}` header
- **æ•°æ®æ ¼å¼**:

  ```javascript
  {
    postId, userId, content, parentId: null
  }
  ```

- **çŠ¶æ€**: âœ… **æ¥å£å®ç°æ­£ç¡®ï¼Œå¯ä»¥ä¸åç«¯è”é€š**

## æ¥å£å®ç°è¯´æ˜

æ‰€æœ‰ API æ¥å£è°ƒç”¨ç»Ÿä¸€é€šè¿‡ `src/api/request.js` å°è£…ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

- âœ… è‡ªåŠ¨æ·»åŠ  JWT Token è®¤è¯
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†
- âœ… å¼€å‘ç¯å¢ƒä¸‹è¯¦ç»†çš„è¯·æ±‚/å“åº”æ—¥å¿—
- âœ… è‡ªåŠ¨å¤„ç† 401 é”™è¯¯ï¼ˆæ¸…é™¤ token å¹¶è·³è½¬ç™»å½•ï¼‰
